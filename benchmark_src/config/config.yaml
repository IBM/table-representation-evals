defaults:
  - _self_
  - task: ~
  - approach: ~
  - experiment: ~
  - override hydra/launcher: joblib

# Benchmark configuration
benchmark_output_dir: ~
benchmark_datasets_dir: ~
dataset_name: ~

# Test configuration
test_case_limit: null  # int or null

# Hydra configuration
hydra:
  mode: MULTIRUN
  searchpath:
    - approaches/configs
  
  # Job configuration
  job:
    chdir: True
    config:
      override_dirname:
        exclude_keys:
          - approach
          - dataset_name
          - task
          - experiment
  
  # Output directory structure
  run:
    dir: results/${benchmark_output_dir}/${approach.approach_name}/${sanitize_dirname:${hydra:job.override_dirname}}/${task.task_name}/${dataset_name}
  sweep:
    dir: results
    subdir: ${benchmark_output_dir}/${approach.approach_name}/${sanitize_dirname:${hydra:job.override_dirname}}/${task.task_name}/${dataset_name}
  
  # Launcher configuration (can be overridden by experiments)
  launcher:
    n_jobs: 2
    prefer: processes
    backend: loky  # More stable than multiprocessing
    timeout: 3600  # 1 hour timeout per job
  
  # Sweeper configuration
  sweeper:
    max_batch_size: 1
    max_failure_rate: 0.1  # Allow 10% failure rate